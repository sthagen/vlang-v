#!/usr/bin/env expect
source "common.tcl"

expect "Break on * main in ${test_file}:6"
expect "${test_file}:6 vdbg> "
send "scope\n"
expect "a = 1 (int)"
send "c\n"
expect "Break on * main in ${test_file}:11"
expect "${test_file}:11 vdbg> "
send "scope\n"
expect "e = 3 (int)"
expect "a = 1 (int)"
send "c\n"
expect "Break on * main in ${test_file}:20"
expect "${test_file}:20 vdbg> "
send "scope\n"
expect "x = 1 (int)"
send "c\n"
expect "Break on * main in ${test_file}:25"
expect "${test_file}:25 vdbg> "
send "scope\n"
expect "a = 1 (int)"
expect "b = 2 (int)"
expect "x = 1 (int)"
send "c\n"
expect "Break on * main in ${test_file}:30"
expect "${test_file}:30 vdbg> "
send "scope\n"
expect "a = 1 (int)"
expect "b = 2 (int)"
expect "x = 1 (int)"
send "c\n"
expect "Break on * main in ${test_file}:33"
expect "${test_file}:33 vdbg> "
send "scope\n"
expect "a = 1 (int)"
expect "b = 2 (int)"
expect "z = 0 (int)"
expect "x = 1 (int)"
send "c\n"
expect "Break on * main in ${test_file}:38"
expect "${test_file}:38 vdbg> "
send "scope\n"
expect "y = 1 (int)"
expect "x = 1 (int)"
send "c\n"
expect eof
